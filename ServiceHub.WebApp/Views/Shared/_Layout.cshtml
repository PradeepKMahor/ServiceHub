@{
    var isMobileBool = (bool)@Context.Items["isMobile"];
    string isMobile = "false";
    if (isMobileBool == true)
    {
        isMobile = "true";
    }
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <link rel="manifest" href="~/manifest.json" crossorigin="use-credentials" />

    <title> Service Hub </title>

    <partial name="_Styles" />
    <!--Render Styles-->
    @await RenderSectionAsync("Styles", required: false)

    <!--Render Styles-->
</head>
@* <body class="hold-transition sidebar-mini">
 *@
@* <body class="hold-transition sidebar-mini pace-warning">
 *@
<body class="sidebar-mini pace-warning pace-running sidebar-collapse">
    <div class="wrapper">
        <partial name="_TopNavigation" />
        @if ((bool)@Context.Items["isMobile"] == false)
        {
            <partial name="_MainNavigation" />
        }

        <!-- Main Sidebar Container -->
        <div class="content-wrapper">
            @*<div class="content-header">
            <div class="container-fluid">
            <div class="row mb-2">
            <div class="col-sm-6">
            <h1 class="m-0 text-dark">Starter Page</h1>
            </div>
            <div class="col-sm-6">
            <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="#">Home</a></li>
            <li class="breadcrumb-item active">Starter Page</li>
            </ol>
            </div>
            </div>
            </div>
            </div>*@
            <div class="content">
                <nav aria-label="breadcrumb">
                    @await RenderSectionAsync("BreadCrumbs", required: false)
                </nav>
                @if ((bool)@Context.Items["isMobile"] == true)
                {

                    <div class="container-fluid pt-2 pr-0 pl-0">
                        @RenderBody()

                    </div>
                }
                else
                {
                    <div class="container-fluid p-2 ">

                        @RenderBody()

                    </div>
                }

            </div>
        </div>
        <aside class="control-sidebar control-sidebar-dark">
            <div class="p-3">
                <h5>Title</h5>
                <p>Sidebar content</p>
            </div>
        </aside>
        <partial name="_Footer" />
    </div>

    <partial name="_Scripts" />
    <script src="~/js/site.js" asp-append-version="true"></script>

    @await Html.PartialAsync("_notificationPartial")
    @await Html.PartialAsync("_RestrictIEScriptPartial")
    @await RenderSectionAsync("Scripts", required: false)
    <script type="text/javascript">
        var datatableColumns;
        var isMobileBool = "NA";
        $(document).ready(function () {

            // if (isMobileBool == "NA") {
            //     isMobileBool = @(((bool)@Context.Items["isMobile"]) ? "true" : "false");
            //     if (isMobileBool == false) {
            //         alert("IsMobile : false");
            //     } else {
            //         window.location.href = '@Url.Action("CMRDashboardIndex", "Home", new { Area = "Technician" })';
            //     }
            // }
        });
    </script>
</body>
</html>

@if ((bool)@Context.Items["isMobile"] == true)
{
    @*     <link rel="stylesheet" type="text/css" href="~/assets/css/style.css">
 *@
    <link rel="stylesheet" href="~/assets/vendor/swiper/swiper-bundle.min.css">
    <script src="~/assets/js/jquery.js"></script>
    <script src="~/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="~/assets/js/settings.js"></script>
    <script src="~/assets/js/custom.js"></script>
    <script src="~/assets/js/dz.carousel.js"></script>

    <!-- Swiper -->
    <script src="~/assets/vendor/swiper/swiper-bundle.min.js"></script>

    <!-- Swiper -->
    <!-- PWA Offcanvas -->
    <div class="offcanvas offcanvas-bottom pwa-offcanvas">
        <div class="container">
            <div class="offcanvas-body small">
                <img class="logo" src="~/images/logo.png" alt="">
                <h5 class="title">ServiceHub on Your Home Screen</h5>
                <p class="pwa-text">
                    Install ServiceHub mobile app to your home screen for easy access, just like any other app
                </p>
                <a href="javascrpit:void(0);" class="btn btn-sm btn-secondary pwa-btn">Add to Home Screen</a>
                <a href="javascrpit:void(0);" class="btn btn-sm pwa-close light btn-danger ms-2">Maybe later</a>
            </div>
        </div>
    </div>
    <div class="offcanvas-backdrop pwa-backdrop"></div>

    <!-- PWA Offcanvas End -->
    <script type="text/javascript">
        var datatableColumns;
        var isMobileBool = "NA";
        $(document).ready(function () {

            // Register Service worker to control making site work offline
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker
                    .register('app.js')
                    .then(() => { console.log('Service Worker Registered'); });
            }

            // Code to handle install prompt on desktop
            let deferredPrompt;
            const pwaBtn = document.querySelector('.pwa-btn');
            const installText = document.querySelector('.pwa-text');
            //pwaBtn.style.display = 'none';

            /* for ios start */
            function isThisDeviceRunningiOS() {
                //if (['iPad Simulator', 'iPhone Simulator', 'iPod Simulator', 'iPad', 'iPhone', 'iPod', 'ios'].includes(navigator.platform) || navigator.userAgent.indexOf('Mac OS X') != -1) {
                //    installText.innerHTML = 'Install Jobie job portal mobile app template to your home screen for easy access click to safari share option "Add to Home Screen".';
                //    pwaBtn.remove();
                //    return true;
                //}
            }
            isThisDeviceRunningiOS();
            /* for ios start */

            window.addEventListener('beforeinstallprompt', (e) => {
                // Prevent Chrome 67 and earlier from automatically showing the prompt
                e.preventDefault();
                // Stash the event so it can be triggered later.
                deferredPrompt = e;
                // Update UI to notify the user they can add to home screen
                //pwaBtn.style.display = 'block';

                pwaBtn.addEventListener('click', () => {
                    // hide our user interface that shows our A2HS button
                    //pwaBtn.style.display = 'none';
                    // Show the prompt
                    deferredPrompt.prompt();
                    // Wait for the user to respond to the prompt
                    deferredPrompt.userChoice.then((choiceResult) => {
                        if (choiceResult.outcome === 'accepted') {
                            console.log('User accepted the A2HS prompt');
                        } else {
                            console.log('User dismissed the A2HS prompt');
                        }
                        deferredPrompt = null;
                    });
                });
            });

        });
    </script>
}