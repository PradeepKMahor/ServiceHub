@model ServiceHub.WebApp.Models.CMRCreateViewModel

@{
    ViewData["Title"] = "New Corrective Maint Requests ";
    var title = "New Corrective Maint Requests  ";
    var Varid = "";
}
@Html.AntiForgeryToken()

@section BreadCrumbs
{
    <ol class="breadcrumb">
        <li class="breadcrumb-item "><a asp-action="Index" asp-controller="Home" asp-area="ServiceRequest">Dashboard</a></li>
        <li class="breadcrumb-item "><a asp-action="Index" asp-controller="CMR" asp-area="ServiceRequests">CMR List</a></li>

        <li class="breadcrumb-item active" aria-current="page">New Corrective Maintenance Request </li>
    </ol>

}
@section Styles {
    <style>

        .step-container {
            position: relative;
            text-align: center;
            transform: translateY(-43%);
        }

        .step-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #fff;
            border: 2px solid #007bff;
            line-height: 30px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            cursor: pointer; /* Added cursor pointer */
        }

        .step-line {
            position: absolute;
            top: 16px;
            left: 50px;
            width: calc(100% - 100px);
            height: 2px;
            background-color: #007bff;
            z-index: -1;
        }

        #multi-step-form {
            overflow-x: hidden;
            transform: translateY(-5%);
        }
    </style>
}
<div class="container-fluid ">
    @* <div class="row d-flex justify-content-center align-items-center h-100"> *@

    <div class="container-fluid bg-white border card rounded shadow m-auto col-xl-11 p-2 ">
        <div class="app-h4 app-card-header mb-2">
            <p>New Request </p>
        </div>
        <div id="container" class="  mt-5">
            <div class="progress px-1" style="height: 3px;">
                <div class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
            </div>
            <div class="step-container d-flex justify-content-between">
                <div class="step-circle" onclick="displayStep(1)">Create</div>
                <div class="step-circle" onclick="displayStep(2)">Resolution</div>
                <div class="step-circle" onclick="displayStep(3)">Log</div>
            </div>

            <form id="multi-step-form">
                <div class="step step-1">
                    <!-- Step 1 form fields here -->
                    <h3>Step 1</h3>
                    @* <div class="mb-3">
                    <label for="field1" class="form-label">Field 1:</label>
                    <input type="text" class="form-control" id="field1" name="field1">
                    </div> *@
                    <div class="card-toolbar">
                        <div role="toolbar">
                            <div class="card rounded-3">
                                <div class="card-body ">
                                    <form asp-controller="ServiceRequest"
                                          asp-area="ServiceRequests"
                                          asp-action="CreateServiceRequest"
                                          id="formServiceRequests">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto1">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto2">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto3">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto4">
                                        <input type="hidden" asp-for="SrUploadPhoto1">
                                        <input type="hidden" asp-for="SrUploadPhoto2">
                                        <input type="hidden" asp-for="SrUploadPhoto3">
                                        <input type="hidden" asp-for="SrUploadPhoto4">
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-xl-4 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="CustomerName" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <input asp-for="CustomerName" class="form-control capitalize" required />
                                                            <span asp-validation-for="CustomerName" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-4 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SerialNo" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <input asp-for="SerialNo" class="form-control capitalize" required />
                                                            <span asp-validation-for="SerialNo" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-4 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="Product" class="col-12 control-label"></label>
                                                        <div class="col-12">

                                                            <select asp-for="Product" class="form-control" required>
                                                                <option> </option>
                                                                <option>Product 1</option>
                                                                <option>Product 2</option>
                                                                <option>Product 3</option>
                                                                <option>Product 4</option>
                                                            </select>
                                                            <span asp-validation-for="Product" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-12 col-md-12 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="ServiceCause" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <select asp-for="ServiceCause" class="chosen-select-multiple form-control" multiple="multiple" required>
                                                                <option> </option>
                                                                <option>ServiceCause 1</option>
                                                                <option>ServiceCause 2</option>
                                                                <option>ServiceCause 3</option>
                                                                <option>ServiceCause 4</option>
                                                            </select>
                                                            <span asp-validation-for="ServiceCause" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-12 col-md-12 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="OtherUserComments" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <textarea asp-for="OtherUserComments" rows="3" class="form-control capitalize" required>
                                                </textarea>
                                                            <span asp-validation-for="OtherUserComments" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row border p-1">

                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrUploadPhoto1" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrUploadPhoto1"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrUploadPhoto1" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrUploadPhoto2" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrUploadPhoto2"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrUploadPhoto2" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrUploadPhoto3" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrUploadPhoto3"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrUploadPhoto3" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrUploadPhoto4" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrUploadPhoto4"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrUploadPhoto4" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="from-group m-2 pb-2">

                                                <div class="col-12 ">
                                                    @*                         Edit   : <partial name="_EditAndBackToListBtn" model="@Convert.ToInt32(1)" />
                                                    Create :<partial name="_CreateAndBackToListBtn" />
                                                    *@
                                                    @* @if (Model.StudentInquiry.Id != 0)
                                                    {

                                                    //Edit btn and back to list
                                                    <partial name="_EditAndBackToListBtn" model="@Convert.ToInt32(Varid)" />
                                                    }
                                                    else
                                                    {

                                                    // Create btn and back to list
                                                    <partial name="_CreateAndBackToListBtn" />
                                                    } *@
                                                </div>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-success btn-md  mb-1 " style="float:right">Submit</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary next-step">Next</button>
                </div>

                <div class="step step-2">
                    <!-- Step 2 form fields here -->
                    <h3>Step 2</h3>
                    <div class="card-toolbar">
                        <div role="toolbar">
                            <div class="card rounded-3">
                                <div class="card-body ">
                                    <form asp-controller="ServiceRequest"
                                          asp-area="ServiceRequests"
                                          asp-action="CreateServiceRequest"
                                          id="formServiceRequests">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto1">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto2">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto3">
                                        <input type="hidden" asp-for="SrResolutionUploadPhoto4">
                                        <input type="hidden" asp-for="SrUploadPhoto1">
                                        <input type="hidden" asp-for="SrUploadPhoto2">
                                        <input type="hidden" asp-for="SrUploadPhoto3">
                                        <input type="hidden" asp-for="SrUploadPhoto4">
                                        <div class="col-12">
                                            <div class="row">
                                                <div class="col-xl-4 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="ETR" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <input asp-for="ETR" class="form-control capitalize" required />
                                                            <span asp-validation-for="ETR" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-4 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="RCA" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <input asp-for="RCA" class="form-control capitalize" required />
                                                            <span asp-validation-for="RCA" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="col-xl-12 col-md-12 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="TechnicianRemarks" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <textarea asp-for="TechnicianRemarks" rows="3" class="form-control capitalize" required>
                                                </textarea>
                                                            <span asp-validation-for="TechnicianRemarks" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="row border p-1">

                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrResolutionUploadPhoto1" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrResolutionUploadPhoto1"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrResolutionUploadPhoto1" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-xl-3 col-md-6 col-sm-12">
                                                    <div class="form-group">
                                                        <label asp-for="SrResolutionUploadPhoto2" class="col-12 control-label"></label>
                                                        <div class="col-12">
                                                            <img id="SrResolutionUploadPhoto2"
                                                                 style="width:150px!important; "
                                                                 src="~/images\UploadImg.png" alt="UploadPhoto"
                                                                 class="profile-user-img img-fluid img-squar">
                                                            <span asp-validation-for="SrResolutionUploadPhoto2" class="text-danger"></span>
                                                        </div>
                                                    </div>
                                                </div>

                                            </div>

                                            <div class="from-group m-2 pb-2">

                                                <div class="col-12 ">
                                                    @*                         Edit   : <partial name="_EditAndBackToListBtn" model="@Convert.ToInt32(1)" />
                                                    Create :<partial name="_CreateAndBackToListBtn" />
                                                    *@
                                                    @* @if (Model.StudentInquiry.Id != 0)
                                                    {

                                                    //Edit btn and back to list
                                                    <partial name="_EditAndBackToListBtn" model="@Convert.ToInt32(Varid)" />
                                                    }
                                                    else
                                                    {

                                                    // Create btn and back to list
                                                    <partial name="_CreateAndBackToListBtn" />
                                                    } *@
                                                </div>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-success btn-md  mb-1 " style="float:right">Submit</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn btn-primary prev-step">Previous</button>
                    <button type="button" class="btn btn-primary next-step">Next</button>
                </div>

                <div class="step step-3">
                    <!-- Step 3 form fields here -->
                    <h3>Step 3</h3>
                    <div class="mb-3">
                        <label for="field3" class="form-label">Field 3:</label>
                        <input type="text" class="form-control" id="field3" name="field3">
                    </div>
                    <button type="button" class="btn btn-primary prev-step">Previous</button>
                    <button type="submit" class="btn btn-success">Submit</button>
                </div>
            </form>
        </div>

    </div>
</div>
@* </div> *@
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
    <script>
        var currentStep = 1;
        var updateProgressBar;

        function displayStep(stepNumber) {
            if (stepNumber >= 1 && stepNumber <= 3) {
                $(".step-" + currentStep).hide();
                $(".step-" + stepNumber).show();
                currentStep = stepNumber;
                updateProgressBar();
            }
        }

        $(document).ready(function () {
            $('#multi-step-form').find('.step').slice(1).hide();

            $(".next-step").click(function () {
                if (currentStep < 3) {
                    $(".step-" + currentStep).addClass("animate__animated animate__fadeOutLeft");
                    currentStep++;
                    setTimeout(function () {
                        $(".step").removeClass("animate__animated animate__fadeOutLeft").hide();
                        $(".step-" + currentStep).show().addClass("animate__animated animate__fadeInRight");
                        updateProgressBar();
                    }, 500);
                }
            });

            $(".prev-step").click(function () {
                if (currentStep > 1) {
                    $(".step-" + currentStep).addClass("animate__animated animate__fadeOutRight");
                    currentStep--;
                    setTimeout(function () {
                        $(".step").removeClass("animate__animated animate__fadeOutRight").hide();
                        $(".step-" + currentStep).show().addClass("animate__animated animate__fadeInLeft");
                        updateProgressBar();
                    }, 500);
                }
            });

            updateProgressBar = function () {
                var progressPercentage = ((currentStep - 1) / 2) * 100;
                $(".progress-bar").css("width", progressPercentage + "%");
            }
        });
        $(document).ready(function () {
            var fileTag = document.getElementById("UploadProfilePic"),
                preview = document.getElementById("preview");

            fileTag.addEventListener("change", function () {
                changeImage(this);
            });

            function changeImage(input) {
                var reader;

                if (input.files && input.files[0]) {
                    reader = new FileReader();

                    reader.onload = function (e) {
                        preview.setAttribute('src', e.target.result);
                    }

                    reader.readAsDataURL(input.files[0]);
                }
            }
        });
    </script>

}